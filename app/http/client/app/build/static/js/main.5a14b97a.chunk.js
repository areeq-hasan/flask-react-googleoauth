(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{68:function(e,t,n){},88:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(16),i=n.n(r),o=(n(68),n(19)),s=n.n(o),u=n(24),l=n(21),j=n(41),p=n(54),d=n(8),b=n(38),h=n(23),O=n.n(h),f=n(120),x=(n(88),n(125)),v=n(126),g=n(127),m=n(124),k=n(128),y=n(129),w=n(130),R=n(123),q=n(122),A=n(2),C=Object(f.a)((function(e){return{smallAvatar:{width:e.spacing(3),height:e.spacing(3)}}}));function F(e){var t=C();return e.authenticated?e.profilePicture?Object(A.jsx)(q.a,{onClick:e.handleLogout,id:"ib",children:Object(A.jsx)(w.a,{src:e.profilePicture,className:t.smallAvatar})}):Object(A.jsx)(R.a,{onClick:e.handleLogout,color:"inherit",children:"Logout"}):Object(A.jsx)(A.Fragment,{children:" "})}var L=n(53),S=Object(f.a)((function(e){return{content:{textAlign:"center",marginTop:40}}}));function T(e){var t=S(),n=Object(a.useState)(!1),c=Object(l.a)(n,2),r=c[0],i=c[1];return e.authRequired?Object(A.jsxs)("div",{className:t.content,children:[Object(A.jsx)(m.a,{variant:"h5",gutterBottom:!0,children:"Oops, you're not logged in!"}),Object(A.jsx)(L.GoogleLogin,{clientId:"374127802621-kcittpp686bbvrm502tvngc5ejn0caa4.apps.googleusercontent.com",buttonText:"Google Login",onSuccess:function(t){function n(){return(n=Object(u.a)(s.a.mark((function n(){var a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(a=new FormData).set("id_token",t.tokenObj.id_token),n.prev=2,n.next=5,O.a.post("/api/profile",a);case 5:e.setAuthRequired(!1),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),i(!0);case 11:case"end":return n.stop()}}),n,null,[[2,8]])})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()},onFailure:function(e){i(!0)},cookiePolicy:"single_host_origin",redirectUri:"postmessage",scope:"openid"}),Object(A.jsx)(k.a,{open:r,autoHideDuration:1e4,onClose:function(){return i(!1)},children:Object(A.jsx)(y.a,{elevation:6,severity:"error",variant:"filled",children:"There was an error logging in."})})]}):Object(A.jsx)(d.a,{to:"/"})}var P=Object(f.a)((function(e){return{content:{textAlign:"center",marginTop:40}}}));function D(e){var t=P(),n=Object(a.useState)(""),c=Object(l.a)(n,2),r=c[0],i=c[1],o=Object(a.useState)(""),j=Object(l.a)(o,2),p=j[0],d=j[1],b=[e.authRequired,e.setAuthRequired],h=b[0],f=b[1];return Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/profile");case 3:t=e.sent,i(t.data.name),d(t.data.google_id),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response&&401===e.t0.response.status&&f(!0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[h,f]),r&&p?Object(A.jsxs)("div",{className:t.content,children:[Object(A.jsxs)(m.a,{variant:"h4",children:["Hello, ",r,"."]}),Object(A.jsx)(m.a,{variant:"body1",children:"Click your profile picture to log out."}),Object(A.jsxs)(m.a,{variant:"body1",children:["Google ID: ",p,"."]})]}):Object(A.jsx)("div",{className:t.content,children:Object(A.jsx)(m.a,{variant:"h5",children:"Loading..."})})}var G=["children","authRequired"];O.a.defaults.headers.common["X-Requested-With"]="XmlHttpRequest";var I=Object(f.a)((function(e){return{title:{flexGrow:1}}})),N=function(e){var t=e.children,n=e.authRequired,a=Object(p.a)(e,G);return Object(A.jsx)(d.b,Object(j.a)(Object(j.a)({},a),{},{children:n?Object(A.jsx)(d.a,{to:"/login"}):t}))};var _=function(e){var t=I(),n=Object(a.useState)(!1),c=Object(l.a)(n,2),r=c[0],i=c[1],o=Object(a.useState)(null),j=Object(l.a)(o,2),p=j[0],h=j[1],f=Object(a.useState)(!1),w=Object(l.a)(f,2),R=w[0],q=w[1];return Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=13;break}return e.prev=1,e.next=4,O.a.get("/api/profile");case 4:t=e.sent,h(t.data.picture),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),e.t0.response&&401===e.t0.response.status&&i(!0);case 11:e.next=14;break;case 13:h(null);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(x.a,{}),Object(A.jsx)(v.a,{postion:"relative",children:Object(A.jsxs)(g.a,{children:[Object(A.jsx)(m.a,{color:"inherit",variant:"h6",className:t.title,children:"Flask-React Google OAuth2.0 Template"}),Object(A.jsx)(F,{handleLogout:function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.delete("/api/profile");case 3:200!==(t=e.sent).status&&204!==t.status||i(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),q(!0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},authenticated:!r,profilePicture:p})]})}),Object(A.jsx)(b.a,{children:Object(A.jsxs)(d.d,{children:[Object(A.jsx)(d.b,{path:"/login",children:Object(A.jsx)(T,{authRequired:r,setAuthRequired:i,clientId:"374127802621-kcittpp686bbvrm502tvngc5ejn0caa4.apps.googleusercontent.com"})}),Object(A.jsx)(N,{authRequired:r,path:"/",children:Object(A.jsx)(D,{setAuthRequired:i})})]})}),Object(A.jsx)(k.a,{open:R,autoHideDuration:1e4,onClose:function(){return q(!1)},children:Object(A.jsx)(y.a,{variant:"filled",elevated:6,severity:"error",children:"Couldn't log out"})})]})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,132)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(A.jsx)(c.a.StrictMode,{children:Object(A.jsx)(_,{})}),document.getElementById("root")),H()}},[[98,1,2]]]);
//# sourceMappingURL=main.5a14b97a.chunk.js.map